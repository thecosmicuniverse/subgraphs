enum SaleType {
  AUCTION,
  FIXED,
  OFFER
}

enum TokenType {
  ERC721,
  ERC1155
}

type User @entity {
  id: Bytes!

}

type Config @entity {
  id: Bytes!
  marketFeeBps: BigInt! # uint256
  royaltyBps: BigInt! # uint256
  nextBidPercentInBasisPoint: BigInt!
  extensionDuration: BigInt!
}

type Contract @entity {
  id: Bytes!
}

type BidToken @entity {
  id: Bytes!
}

type ContractBidToken @entity {
  id: Bytes!
  contract: Contract!
  bidToken: BidToken!
}

type FinalizedSaleDetails @entity {
  id: Bytes!
  royalty: BigInt!
  marketFee: BigInt!
  ownerRev: BigInt!
  sale: Sale!
}

type Bid @entity {
  id: Bytes!
  bidder: User!
  bidAmount: BigInt!
  endTime: BigInt!
  sale: Sale!
}

type Cancellation @entity {
  id: Bytes!
  reason: String!
  timestamp: BigInt!
  sale: Sale!
}
type Sale @entity {
  id: Bytes!
  saleId: BigInt! # uint256
  saleType: SaleType! # uint8
  seller: User # address
  contract: Contract! # address
  tokenType: TokenType! # uint8
  tokenIds: [BigInt!]! # uint256[]
  values: [BigInt!]! # uint256[]
  bidToken: BidToken! # address
  startTime: BigInt! # uint256
  duration: BigInt! # uint256
  extensionDuration: BigInt! # uint256
  endTime: BigInt! # uint256
  minPrice: BigInt! # uint256
  bids: [Bid!] @derivedFrom(field: "sale")
  finalizedSaleDetails: FinalizedSaleDetails
}

